# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'layoutNew.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.

import sys
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtCore import QUrl, QFileInfo
from PyQt5.QtWidgets import QLabel, QFileDialog, QMessageBox

import model
from predict import Predict


class Ui_MainWindow(object):
    def __init__(self, model):
        self.filename = None
        self.filePred = None
        self.splitVal = None
        self.df = None
        self.lst = None
        self.predData = None
        self.model = model
        # self.Predict = Predict

    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(572, 340)

        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")

        self.tabWidget = QtWidgets.QTabWidget(self.centralwidget)
        self.tabWidget.setGeometry(QtCore.QRect(30, 40, 511, 231))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        font.setStyleStrategy(QtGui.QFont.NoAntialias)
        self.tabWidget.setFont(font)
        self.tabWidget.setFocusPolicy(QtCore.Qt.TabFocus)
        self.tabWidget.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)
        self.tabWidget.setStyleSheet("background-color: rgb(203, 255, 153);")
        self.tabWidget.setObjectName("tabWidget")

        self.tab = QtWidgets.QWidget()
        self.tab.setObjectName("tab")
#=================================================================================== Tab 1
        self.frame = QtWidgets.QFrame(self.tab)
        self.frame.setGeometry(QtCore.QRect(10, 20, 351, 51))

        self.frame.setStyleSheet("background-color : rgb(255, 255, 255);\n" "border-color: rgb(8, 8, 8);")
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        self.fileName = QtWidgets.QLabel(self.frame)
        self.fileName.setGeometry(QtCore.QRect(10, 0, 9999, 13))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.fileName.setFont(font)
        self.fileName.setObjectName("fileName")

        self.spinBox = QtWidgets.QSpinBox(self.tab, value=1, prefix='0.')
        self.spinBox.setGeometry(QtCore.QRect(170, 100, 42, 22))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.spinBox.setFont(font)
        self.spinBox.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.spinBox.setObjectName("spinBox")
        self.iimportKlass = QtWidgets.QPushButton(self.tab)
        self.iimportKlass.setGeometry(QtCore.QRect(400, 20, 81, 31))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.iimportKlass.setFont(font)
        self.iimportKlass.setStyleSheet("background-color: rgb(170, 170, 127);")
        self.iimportKlass.setObjectName("iimportKlass")
        self.iimportKlass.clicked.connect(self.impFile)

        self.buttonSimpan = QtWidgets.QPushButton(self.tab)
        self.buttonSimpan.setGeometry(QtCore.QRect(400, 100, 81, 31))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.buttonSimpan.setFont(font)
        self.buttonSimpan.setStyleSheet("background-color: rgb(170, 170, 127);")
        self.buttonSimpan.setObjectName("buttonSimpan")
        self.buttonSimpan.clicked.connect(self.saveFile)

        self.label_2 = QtWidgets.QLabel(self.tab)
        self.label_2.setGeometry(QtCore.QRect(20, 100, 150, 16))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.checkBox = QtWidgets.QCheckBox(self.tab)
        self.checkBox.setGeometry(QtCore.QRect(250, 100, 111, 21))
        self.checkBox.setStyleSheet("font: 75 12pt \"Cambria\";")
        self.checkBox.setObjectName("checkBox")
        #===================================================================
        self.tabWidget.addTab(self.tab, "")

        self.tab_2 = QtWidgets.QWidget()
        self.tab_2.setObjectName("tab_2")
        self.label_3 = QtWidgets.QLabel(self.tab_2)
        self.label_3.setGeometry(QtCore.QRect(10, 10, 61, 16))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setObjectName("label_3")
        self.label_4 = QtWidgets.QLabel(self.tab_2)
        self.label_4.setGeometry(QtCore.QRect(10, 30, 61, 16))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setObjectName("label_4")
        self.SplitLabel = QtWidgets.QLabel(self.tab_2)
        self.SplitLabel.setGeometry(QtCore.QRect(70, 10, 47, 13))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.SplitLabel.setFont(font)
        self.SplitLabel.setObjectName("SplitLabel")
        self.DatasetLabel = QtWidgets.QLabel(self.tab_2)
        self.DatasetLabel.setGeometry(QtCore.QRect(70, 30, 999, 16))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.DatasetLabel.setFont(font)
        self.DatasetLabel.setObjectName("DatasetLabel")
        #===================================================================== View Result

        self.scrollArea = QtWidgets.QTextEdit(self.tab_2, readOnly=True)
        self.scrollArea.setGeometry(QtCore.QRect(10, 80, 481, 111))
        self.scrollArea.setStyleSheet("background-color: rgb(255, 255, 255);")
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.scrollArea.setFont(font)
        # self.scrollArea.setWidgetResizable(True)
        self.scrollArea.setObjectName("scrollArea")
        self.scrollAreaWidgetContents = QtWidgets.QWidget()
        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(0, 0, 449, 89))

        self.scrollAreaWidgetContents.setObjectName("scrollAreaWidgetContents")
        # self.scrollArea.setWidget(self.scrollAreaWidgetContents)

        self.startKlass = QtWidgets.QPushButton(self.tab_2)
        self.startKlass.setGeometry(QtCore.QRect(380, 20, 101, 31))
        font = QtGui.QFont()
        font.setFamily("MS Shell Dlg 2")
        font.setPointSize(10)
        font.setBold(False)
        font.setItalic(False)
        font.setWeight(9)
        self.startKlass.setFont(font)
        self.startKlass.setStyleSheet("background-color: rgb(170, 170, 127);\n" "font: 75 10pt \"MS Shell Dlg 2\";\n" "border-color: rgb(0, 0, 0);")
        self.startKlass.setObjectName("startKlass")

        self.startKlass.clicked.connect(self.clicked)
        self.label_5 = QtWidgets.QLabel(self.tab_2)
        self.label_5.setGeometry(QtCore.QRect(10, 50, 71, 16))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_5.setFont(font)
        self.label_5.setObjectName("label_5")
        self.DatasetLabel_2 = QtWidgets.QLabel(self.tab_2)
        self.DatasetLabel_2.setGeometry(QtCore.QRect(70, 50, 71, 16))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.DatasetLabel_2.setFont(font)
        self.DatasetLabel_2.setObjectName("DatasetLabel_2")
        self.tabWidget.addTab(self.tab_2, "")
        #===========================================================================================


        # self.tab_3 = QtWidgets.QWidget()
        # self.tab_3.setObjectName("tab_3")
        # self.importPred = QtWidgets.QPushButton(self.tab_3)
        # self.importPred.setGeometry(QtCore.QRect(410, 20, 81, 31))
        # font = QtGui.QFont()
        # font.setFamily("MS Shell Dlg 2")
        # font.setPointSize(10)
        # font.setBold(False)
        # font.setItalic(False)
        # font.setWeight(9)
        # self.importPred.setFont(font)
        # self.importPred.setStyleSheet("background-color: rgb(170, 170, 127);\n" "font: 75 10pt \"MS Shell Dlg 2\";")
        #
        # self.importPred.setObjectName("importPred")
        # self.importPred.clicked.connect(self.impPred)
        #
        # self.frame_2 = QtWidgets.QFrame(self.tab_3)
        # self.frame_2.setGeometry(QtCore.QRect(20, 10, 351, 61))
        # self.frame_2.setStyleSheet("background-color: rgb(255, 255, 255);\n" "border-color: rgb(0, 0, 0);")
        # self.frame_2.setFrameShape(QtWidgets.QFrame.StyledPanel)
        # self.frame_2.setFrameShadow(QtWidgets.QFrame.Raised)
        # self.frame_2.setObjectName("frame_2")
        # self.filePred = QtWidgets.QLabel(self.frame_2)
        # self.filePred.setGeometry(QtCore.QRect(10, 10, 999, 13))
        # font = QtGui.QFont()
        # font.setFamily("Cambria")
        # font.setPointSize(9)
        # font.setBold(True)
        # font.setWeight(75)
        # self.filePred.setFont(font)
        # self.filePred.setObjectName("filePred")
        # self.prediksi = QtWidgets.QPushButton(self.tab_3)
        # self.prediksi.setGeometry(QtCore.QRect(20, 90, 91, 31))
        # ont = QtGui.QFont()
        # font.setFamily("MS Shell Dlg 2")
        # font.setPointSize(10)
        # font.setBold(False)
        # font.setItalic(False)
        # font.setWeight(9)
        # self.prediksi.setFont(font)
        # self.prediksi.setStyleSheet("background-color: rgb(170, 170, 127);\n" "font: 75 10pt \"MS Shell Dlg 2\";")
        # self.prediksi.clicked.connect(self.predd)
        # self.prediksi.setObjectName("prediksi")
        # self.expPredict = QtWidgets.QPushButton(self.tab_3)
        # self.expPredict.setGeometry(QtCore.QRect(20, 140, 91, 31))
        # font = QtGui.QFont()
        # font.setFamily("MS Shell Dlg 2")
        # font.setPointSize(10)
        # font.setBold(False)
        # font.setItalic(False)
        # font.setWeight(9)
        # self.expPredict.setFont(font)
        # self.expPredict.setStyleSheet("background-color: rgb(170, 170, 127);\n" "font: 75 10pt \"MS Shell Dlg 2\";")
        # self.expPredict.clicked.connect(self.exptPredict)
        # self.expPredict.setObjectName("expPredict")
        #
        # #====================================================================================================
        # self.tabWidget.addTab(self.tab_3, "")
        self.tab_3 = QtWidgets.QWidget()
        self.tab_3.setObjectName("tab_3")
        self.importPred = QtWidgets.QPushButton(self.tab_3)
        self.importPred.setGeometry(QtCore.QRect(410, 20, 81, 31))
        self.importPred.clicked.connect(self.predd)
        font = QtGui.QFont()
        font.setFamily("MS Shell Dlg 2")
        font.setPointSize(10)
        font.setBold(False)
        font.setItalic(False)
        font.setWeight(9)
        self.importPred.setFont(font)
        self.importPred.setStyleSheet("background-color: rgb(170, 170, 127);\n"
                                      "font: 75 10pt \"MS Shell Dlg 2\";")
        self.importPred.setObjectName("importPred")
        self.textEdit = QtWidgets.QTextEdit(self.tab_3, readOnly=True)
        self.textEdit.setGeometry(QtCore.QRect(10, 80, 481, 111))
        self.textEdit.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                    "border-color: rgb(0, 0, 0);")

        self.textEdit.setObjectName("textEdit")
        self.tabWidget.addTab(self.tab_3, "")
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(130, 10, 311, 16))
        font = QtGui.QFont()
        font.setFamily("Cambria")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 572, 21))
        self.menubar.setObjectName("menubar")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        self.tabWidget.setCurrentIndex(1)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.iimportKlass.setText(_translate("MainWindow", "Import File"))
        self.buttonSimpan.setText(_translate("MainWindow", "Simpan"))
        self.label_2.setText(_translate("MainWindow", "Tentukan Data Latih :"))
        self.checkBox.setText(_translate("MainWindow", "Pruning Tree"))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab), _translate("MainWindow", "Kelola Data"))
        self.label_3.setText(_translate("MainWindow", "Split Data :"))
        self.label_4.setText(_translate("MainWindow", "Dataset     :"))
        # self.SplitLabel.setText(_translate("MainWindow", "splitLabel"))
        # self.DatasetLabel.setText(_translate("MainWindow", "DatasetLabel"))
        self.startKlass.setText(_translate("MainWindow", "Mulai Klasifikasi"))
        self.label_5.setText(_translate("MainWindow", "Pruning    :"))

        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_2), _translate("MainWindow", "Klasifikasi"))
        self.importPred.setText(_translate("MainWindow", "Mulai Pediksi"))
        # self.prediksi.setText(_translate("MainWindow", "Mulai Prediksi"))
        # self.expPredict.setText(_translate("MainWindow", "Ekspor Hasil"))
        # self.filePred.setText(_translate("MainWindow", "TextLabel"))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_3), _translate("MainWindow", "Prediksi"))
        self.label.setText(_translate("MainWindow", "PREDIKSI PENGANGGURAN KEC.CARINGIN"))

    def clicked(self):
        try:
            self.model.Classify()
            self.scrollArea.setPlainText(self.model.result)
            self.show_popupClassify()
        except:
            self.show_popupDataEmpty()

    def impPred(self):
        fPred, _ = QFileDialog.getOpenFileName(QtWidgets.QWidget(), "Open File", " ", "CSV File (*.csv)")
        self.filepred = QFileInfo(fPred).fileName()
        print(self.filepred)
        if fPred:
            self.filePred.setText(str(self.filepred))
        self.predName = self.filepred
        # self.model.importPredict()
        self.predData = Predict.importPredict(namefile=self.predName)
        self.show_popupImp()
        return self.filepred

    def exptPredict(self):
        try:
            # self.model.exportPredict()
            Predict.exportPredict(self.df, self.lst)
            self.show_popupExpt()
        except :
            self.show_popupNotClassy()

    def impFile(self):
        # self.model.test()
        fname,_ = QFileDialog.getOpenFileName(QtWidgets.QWidget(), "Open File", " ", "CSV File (*.csv)")
        self.filename = QFileInfo(fname).fileName()
        print(self.filename)
        if fname:
            self.fileName.setText(str(self.filename))
        self.show_popupImp()
        return self.filename

    def saveFile(self):
        try:
            self.fnames = (self.filename)
            self.splitVal = (self.spinBox.value())
            self.strval= (str(self.splitVal))
            self.SplitLabel.setText('0.'+self.strval)
            self.DatasetLabel.setText(self.fnames)
            self.show_popupSave()
            self.prunVal = (self.checkBox.isChecked())
            self.DatasetLabel_2.setText(str(self.prunVal))
            print("split data value = " + str(self.splitVal))
            # print("prunning value = ", self.prunVal)
        except:
            self.show_popupDataEmpty()

    def predd(self):
        try:
            # self.model.prediks()
            self.model.predic()
            self.textEdit.setText(self.model.prdd)
            font = QtGui.QFont()
            font.setFamily("Cambria")
            font.setPointSize(9)
            font.setBold(True)
            font.setWeight(75)
            self.textEdit.setFont(font)
            # self.df, self.lst = Predict.prediks(self.predData, self.model.Classify(), self.model.rob)
            self.show_popupPredict()
        except:
            self.show_popupNotClassy()

    def show_popupImp(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Data Berhasl Di Impor')
        x = msg.exec()

    def show_popupSave(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Data Berhasl Disimpan')
        x = msg.exec()

    def show_popupClassify(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Klasifikasi Selesai')
        x = msg.exec()

    def show_popupPredict(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Prediksi Selesai')
        x = msg.exec()

    def show_popupExpt(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Data Berhasil Diekspor')
        x = msg.exec()

    def show_popupDataEmpty(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Data Belum dI Import')
        x = msg.exec()

    def show_popupNotPredict(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Belum Ada Hasil Prediksi')
        x = msg.exec()

    def show_popupNotClassy(self):
        msg = QMessageBox()
        msg.setWindowTitle('Prediksi Pengangguran')
        msg.setText('Data Belum Di Import\n atau Data Belum di Klasifikasi')
        x = msg.exec()